<h1>How to add an entry in the Workflow View Menu<h1>

<h1>Introduction</h1>

The workflow view menu has been developed to be easily extended with new page. The new links are displayed in the left menu of the workflow view<br>
<br>
<img src='http://eurelis-opencms-workflows.googlecode.com/svn/wiki/images/Menu_de_gauche_workflows.png' />

<h1>Details</h1>

<h2>Add a new link</h2>

An algorithm is a charge to load the list of page that must be linked into the workflow view menu. It is based on the content of the folder <i>/system/workplace/views/workflows</i> and the properties of the contained files.<br>
<br>
To add a new link you just have to :<br>
<ol><li>Implement the jsp to display what you want (do not forget the required lib ;))<br>
</li><li>Save it in the VFS folder <i>/system/workplace/views/workflows</i>
</li><li>Set the following OpenCMS properties :<br>
<ul><li><i>isAView</i> : <b>true</b> (Very important, if not set, or set to false, the element will not be displayed)<br>
</li><li><i>Title</i> : the title of the page, that will also be the label of the link to the page<br>
</li><li><i>NavImage</i> : The path to the image to display before the link (The path must be relative to <b>/system/workplace/resources/</b> in OpenCms VFS)<br>
</li><li><i>NavText</i> : The text that will be displayed in the "help" Area<br>
</li><li><i>Position</i> : A number corresponding to the position in the menu, if a particular order is required<br>
</li><li><i>RetrictedRoles</i> : A list of OpenCms Role label (separed with |). People with thoses roles will have access to the link. If no roles are defined, everybody will see the link.</li></ul></li></ol>


If you use <a href='http://code.google.com/p/eurelis-opencms-ant-task/'>Eurelis Ant Task</a>, the property file must be as following<br>
<br>
<pre><code>EurelisProperty.type=jsp<br>
Title.i=Display workflows per instances<br>
IsAView.i=true<br>
NavImage.i=tools/accounts/icons/small/accounts.png<br>
NavText.i=This view displays all the instances of workflows that have been created<br>
Position.i=10<br>
RestrictedRoles.i=Root Administrator|Administrator <br>
</code></pre>


<h2>Associated Class Diagram</h2>

<img src='http://eurelis-opencms-workflows.googlecode.com/svn/wiki/images/DiagClass_CmsWorkflowsMenu.png' />

The CmsWorkflowMenu class is the container of the displayable elements. It loads the list of WorkflowMenuItem objects generated by the algorithm embed in the singleton WorkflowMenuItemLoader. Messages class is used for internationalized labels.